{"ast":null,"code":"import _regeneratorRuntime from \"/home/jackson/Desktop/crm-ticket/crm-ticket/CrmFrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/jackson/Desktop/crm-ticket/crm-ticket/CrmFrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nimport { fetchTicketLoading, fetchTicketSuccess, fetchTicketFail, searchTickets, fetchSingleTicketFail, fetchSingleTicketLoading, fetchSingleTicketSuccess, replyTicketFail, replyTicketSuccess, replyTicketError, replyTicketLoading } from \"./ticketSlice\";\nimport { getAllTickets, getSingleTicket, updateReplyTicket, updateTicketStatusClosed } from \"../../api/ticketApi\";\nexport var fetchAllTickets = function fetchAllTickets() {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch(fetchTicketLoading());\n              _context.prev = 1;\n              _context.next = 4;\n              return getAllTickets();\n            case 4:\n              result = _context.sent;\n              dispatch(fetchTicketSuccess(result.data.result));\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              dispatch(fetchTicketFail(_context.t0.message));\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8]]);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var filterSearchTicket = function filterSearchTicket(str) {\n  return function (dispatch) {\n    dispatch(searchTickets(str));\n  };\n};\nexport var fetchsingleTickets = function fetchsingleTickets(id) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch(fetchSingleTicketLoading());\n              _context2.prev = 1;\n              _context2.next = 4;\n              return getSingleTicket(id);\n            case 4:\n              result = _context2.sent;\n              console.log(result);\n              dispatch(fetchSingleTicketSuccess(result.data.result.length && result.data.result[0]));\n              _context2.next = 12;\n              break;\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](1);\n              dispatch(fetchSingleTicketFail(_context2.t0.message));\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 9]]);\n    }));\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\n//Actions for replying on single ticket\nexport var replyOnTicket = function replyOnTicket(id, msgObj) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              dispatch(replyTicketLoading());\n              _context3.prev = 1;\n              _context3.next = 4;\n              return updateReplyTicket(id, msgObj);\n            case 4:\n              result = _context3.sent;\n              console.log(result);\n              if (!(result.status === \"error\")) {\n                _context3.next = 8;\n                break;\n              }\n              return _context3.abrupt(\"return\", dispatch(replyTicketFail(result.Message)));\n            case 8:\n              dispatch(fetchsingleTickets(id));\n              dispatch(replyTicketSuccess(result.Message));\n              _context3.next = 16;\n              break;\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(_context3.t0.message);\n              dispatch(replyTicketFail(_context3.t0.Message));\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 12]]);\n    }));\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\n\n// export const fetchAllTickets = () => async (dispatch) => {\n//   dispatch(fetchTicketLoading());\n//   try {\n//     const result = await getAllTickets();\n//     result.data.result.length &&\n//       dispatch(fetchTicketSuccess(result.data.result));\n//   } catch (error) {\n//     dispatch(fetchTicketFail(error.message));\n//   }\n// };\n\n// export const filterSerachTicket = (str) => (dispatch) => {\n//   dispatch(searchTickets(str));\n// };\n\n// //Actions for single ticket only\n// export const fetchSingleTicket = (_id) => async (dispatch) => {\n//   dispatch(fetchSingleTicketLoading());\n//   try {\n//     const result = await getSingleTicket(_id);\n//     dispatch(\n//       fetchSingleTicketSuccess(\n//         result.data.result.length && result.data.result[0]\n//       )\n//     );\n//   } catch (error) {\n//     dispatch(fetchSingleTicketFail(error.message));\n//   }\n// };\n\n// //Actions for closing ticket\n// export const closeTicket = (_id) => async (dispatch) => {\n//   dispatch(closeTicketLoading());\n//   try {\n//     const result = await updateTicketStatusClosed(_id);\n//     if (result.status === \"error\") {\n//       return dispatch(closeTicketFail(result.message));\n//     }\n\n//     dispatch(fetchSingleTicket(_id));\n\n//     dispatch(closeTicketSuccess(\"Status Updated successfully\"));\n//   } catch (error) {\n//     console.log(error.message);\n//     dispatch(closeTicketFail(error.message));\n//   }\n// };","map":{"version":3,"names":["axios","fetchTicketLoading","fetchTicketSuccess","fetchTicketFail","searchTickets","fetchSingleTicketFail","fetchSingleTicketLoading","fetchSingleTicketSuccess","replyTicketFail","replyTicketSuccess","replyTicketError","replyTicketLoading","getAllTickets","getSingleTicket","updateReplyTicket","updateTicketStatusClosed","fetchAllTickets","dispatch","result","data","message","filterSearchTicket","str","fetchsingleTickets","id","console","log","length","replyOnTicket","msgObj","status","Message"],"sources":["/home/jackson/Desktop/crm-ticket/crm-ticket/CrmFrontEnd/src/page/ticket-listing/TicketAction.js"],"sourcesContent":["import axios from \"axios\";\n\n\nimport {\n    fetchTicketLoading,\n    fetchTicketSuccess,\n    fetchTicketFail,\n    searchTickets,\n   \n    fetchSingleTicketFail,\nfetchSingleTicketLoading,\nfetchSingleTicketSuccess,\nreplyTicketFail,\nreplyTicketSuccess,\nreplyTicketError,\nreplyTicketLoading\n  } from \"./ticketSlice\";\n  \n  import {\n    getAllTickets,\n    getSingleTicket,\n    updateReplyTicket,\n   \n    updateTicketStatusClosed \n  } from \"../../api/ticketApi\";\n  \n\n export const fetchAllTickets = () => async (dispatch) => {\n    dispatch(fetchTicketLoading());\n    try {\n      const result = await getAllTickets();\n     \n     \n     \n   \n     dispatch(fetchTicketSuccess(result.data.result));\n       \n    \n\n    } catch (error) {\n      dispatch(fetchTicketFail(error.message));\n    }\n  };\n\n\n  export const filterSearchTicket = (str) => (dispatch) => {\n    dispatch(searchTickets(str));\n  };\n  \n\n\n  export const fetchsingleTickets = (id) => async (dispatch) => {\n    dispatch(fetchSingleTicketLoading());\n    try {\n      const result = await getSingleTicket(id);\n     \n     \n     console.log(result)\n   \n     dispatch(fetchSingleTicketSuccess(result.data.result.length&&result.data.result[0]));\n       \n    \n\n    } catch (error) {\n      dispatch(fetchSingleTicketFail(error.message));\n    }\n  };\n    //Actions for replying on single ticket\n  export const replyOnTicket = (id, msgObj) => async (dispatch) => {\n    dispatch(replyTicketLoading());\n    try {\n      const result = await updateReplyTicket(id, msgObj);\n      console.log(result);\n      if (result.status === \"error\") {\n        return dispatch(replyTicketFail(result.Message));\n      }\n  \n      dispatch(fetchsingleTickets(id));\n  \n      dispatch(replyTicketSuccess(result.Message));\n    } catch (error) {\n      console.log(error.message);\n      dispatch(replyTicketFail(error.Message));\n    }\n  };\n\n\n\n\n\n\n\n\n  // export const fetchAllTickets = () => async (dispatch) => {\n  //   dispatch(fetchTicketLoading());\n  //   try {\n  //     const result = await getAllTickets();\n  //     result.data.result.length &&\n  //       dispatch(fetchTicketSuccess(result.data.result));\n  //   } catch (error) {\n  //     dispatch(fetchTicketFail(error.message));\n  //   }\n  // };\n  \n  // export const filterSerachTicket = (str) => (dispatch) => {\n  //   dispatch(searchTickets(str));\n  // };\n  \n  // //Actions for single ticket only\n  // export const fetchSingleTicket = (_id) => async (dispatch) => {\n  //   dispatch(fetchSingleTicketLoading());\n  //   try {\n  //     const result = await getSingleTicket(_id);\n  //     dispatch(\n  //       fetchSingleTicketSuccess(\n  //         result.data.result.length && result.data.result[0]\n  //       )\n  //     );\n  //   } catch (error) {\n  //     dispatch(fetchSingleTicketFail(error.message));\n  //   }\n  // };\n  \n\n  // //Actions for closing ticket\n  // export const closeTicket = (_id) => async (dispatch) => {\n  //   dispatch(closeTicketLoading());\n  //   try {\n  //     const result = await updateTicketStatusClosed(_id);\n  //     if (result.status === \"error\") {\n  //       return dispatch(closeTicketFail(result.message));\n  //     }\n  \n  //     dispatch(fetchSingleTicket(_id));\n  \n  //     dispatch(closeTicketSuccess(\"Status Updated successfully\"));\n  //   } catch (error) {\n  //     console.log(error.message);\n  //     dispatch(closeTicketFail(error.message));\n  //   }\n  // };"],"mappings":"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"},"metadata":{},"sourceType":"module"}